:root {
  --cbx-bg: #ffffff;
  --cbx-elev: 0 8px 30px rgba(0,0,0,0.08);
  --cbx-border: rgba(0,0,0,0.08);
  --cbx-muted: rgba(0,0,0,0.5);
  --cbx-muted-2: rgba(0,0,0,0.35);
  --cbx-surface: #f6f7f9;
  --cbx-accent: #111827;
  /* Custom chat palette */
  --user-bubble: #E3C07A;          /* sand yellow/brown */
  --user-text: #2e261a;            /* dark brown text for contrast */
  --assistant-bubble: #f1f2f4;     /* soft gray bubble */
}

.chatbox-root {
  position: fixed;
  right: 20px;
  bottom: 20px;
  z-index: 60;
.chatbox-input-inline{
  display: flex;
  align-items: center;
  gap: 8px;
}
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  /* Force light palette for consistent look across OS settings */
  color-scheme: light;
}

.chatbox-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
.chatbox-input-inline textarea { flex: 1; width: auto; }
  width: 56px;
  height: 56px;
  border: 1px solid var(--cbx-border);
  background: var(--user-bubble);
  color: #fff;
  border-radius: 50%;
  box-shadow: 0 10px 20px rgba(17,108,228,0.35);
  font-weight: 700;
  font-size: 20px;
}
.chatbox-button:hover { filter: brightness(1.05); }
.chatbox-button:active { transform: translateY(1px); }
.chatbox-button-icon{ display:inline-block; line-height:1; }
.chatbox-button:focus-visible {
  outline: 2px solid #116ce4;
  outline-offset: 2px;
}
.chatbox-button-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #16a34a;
  display: inline-block;
}

.chatbox-panel {
  width: clamp(320px, 34vw, 420px);
  height: min(70vh, 720px);
  background: var(--cbx-bg);
  border: 1px solid var(--user-bubble);
  border-radius: 14px;
  box-shadow: var(--cbx-elev);
  display: grid;
  grid-template-rows: auto 1fr auto;
  overflow: hidden;
}

.chatbox-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 12px;
  border-bottom: 1px solid var(--user-bubble);
  background: var(--user-bubble);
}
.chatbox-title {
  font-weight: 600;
}
.chatbox-actions { display: flex; align-items: center; gap: 4px; }
.chatbox-action {
  border: 1px solid var(--cbx-border);
  background: #e0b45c;
  border-radius: 8px;
  padding: 4px 8px;
}
.chatbox-action:hover { background: #f5f5f5; }

.chatbox-messages {
  overflow: auto;
  padding: 12px;
  background: #fff;
}

.msg { 
  border: 1px solid var(--cbx-border);
  background: var(--cbx-surface);
  border-radius: 18px;
  padding: 10px 14px;
  margin: 10px 0;
  position: relative;
  max-width: 80%;
}
.msg-user { 
  background: var(--user-bubble); 
  color: var(--user-text); 
  margin-left: auto; 
  border: none; 
  box-shadow: 0 8px 18px rgba(227, 192, 122, 0.35);
}
.msg-user .msg-content p{ color: var(--user-text); }
.msg-assistant { 
  background: var(--assistant-bubble); 
  border: none;
  box-shadow: 0 4px 10px rgba(0,0,0,0.06);
}
.msg-assistant::before{
  content: "";
  position: absolute;
  left: -12px;
  top: 10px;
  width: 20px; height: 20px;
  border-radius: 50%;
  background: #e6e7ea;
  border: 1px solid rgba(0,0,0,0.06);
  box-shadow: 0 1px 4px rgba(0,0,0,0.06);
}
.msg-system { background: #f0f2f5; }

.msg-meta { color: var(--cbx-muted-2); font-size: 12px; margin-bottom: 4px; }
.msg-content p { margin: 6px 0; line-height: 1.55; color: #111827; text-align: justify; text-justify: inter-word; }

.msg-content, .msg-html { text-align: left; }
.msg-html p { margin: 6px 0; }
.msg-html ul { margin: 6px 0 6px 18px; }
.msg-html ol { margin: 6px 0 6px 18px; list-style: decimal; }
.msg-html li { margin: 4px 0; }
.msg-html strong { font-weight: 700; }
.msg-html a { color: var(--cbx-blue); text-decoration: underline; text-underline-offset: 2px; }

.msg-copy {
  position: absolute;
  top: 8px; right: 8px;
  font-size: 12px;
  color: var(--cbx-muted);
  background: transparent;
  border: 1px solid var(--cbx-border);
  padding: 2px 6px;
  border-radius: 6px;
}
.msg-copy:hover { background: #f2f2f2; }

.chatbox-input {
  border-top: 1px solid var(--cbx-border);
  padding: 10px 12px;
  background: var(--user-bubble);
}
.chatbox-input textarea {
  width: 100%;
  resize: none;
  border: 1px solid var(--cbx-border);
  background: #fff;
  border-radius: 10px;
  padding: 12px 16px;
  min-height: 44px;
  font: inherit;
}
.chatbox-input textarea:focus-visible {
  outline: 2px solid #116ce4;
  outline-offset: 2px;
}
/* removed hint row in favor of inline layout */
.send {
  border: 1px solid var(--cbx-border);
  background: #ff8000;
  color: #ffffff;
  border-radius: 50%;
  width: 40px; height: 40px;
  padding: 0;
  font-weight: 600;
}
.send:disabled { opacity: 0.6; cursor: not-allowed; }
/* simple hover without motion */

.dots {
  display: inline-block;
  letter-spacing: 2px;
  animation: dots 1s steps(3,end) infinite;
  color: var(--cbx-muted);
}
@keyframes dots { 
  0%, 20% { opacity: 0; }
  50% { opacity: 1; }
  100% { opacity: 0; }
}
/* no entrance animation */

/* Screen placement adjustment when panel is open */
.chatbox-root .chatbox-panel { position: fixed; right: 20px; bottom: 20px; }

/* Accessibility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* removed dark mode and custom scrollbar for simplicity */
